{"ast":null,"code":"import _slicedToArray from\"C:/project/garaz-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import firebaseInIt from\"../../Firebase/firebase.init.js\";import{getAuth,signInWithEmailAndPassword,signInWithPopup,GoogleAuthProvider,updateProfile,signOut,createUserWithEmailAndPassword,onAuthStateChanged}from\"firebase/auth\";import{useEffect,useState}from\"react\";firebaseInIt();var useFirebase=function useFirebase(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),newUser=_useState2[0],setNewUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoadind=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var auth=getAuth();var googleProvider=new GoogleAuthProvider();function googleSignIn(){setIsLoading(true);signInWithPopup(auth,googleProvider).then(function(result){var user=result.user;setUser(user);}).finally(function(){return setIsLoading(false);}).catch(function(err){return setError(err.message);});}//email-pass\nfunction registerUser(){createUserWithEmailAndPassword(auth,newUser.email,newUser.password).then(function(result){setUserDisplayName();setNewUser({});}).catch(function(error){return setError(error.message);});}//login\nfunction login(){signInWithEmailAndPassword(auth,newUser.email,newUser.password).then(function(result){var user=result.user;setUser(user);setNewUser({});}).catch(function(error){return setError(error.message);});}//get sign in user\nuseEffect(function(){var unsubscribed=onAuthStateChanged(auth,function(user){if(user){setUser(user);}else{setUser({});}setNewUser({});setIsLoading(false);});return function(){return unsubscribed;};},[]);//set user name and photo url\nfunction setUserDisplayName(){updateProfile(auth.currentUser,{displayName:newUser.name,photoURL:newUser.photoURL}).then(function(){}).catch(function(error){setError(error.message);});}//logout\nfunction logout(){setIsLoading(true);signOut(auth).then(function(){setNewUser({});setUser({});}).finally(function(){return setIsLoading(false);}).catch(function(err){return setError(err.message);});}return{googleSignIn:googleSignIn,isLoadind:isLoadind,user:user,error:error,logout:logout,newUser:newUser,setNewUser:setNewUser,registerUser:registerUser,login:login};};export default useFirebase;","map":{"version":3,"sources":["C:/project/garaz-client/src/Components/hooks/useFirebase.js"],"names":["firebaseInIt","getAuth","signInWithEmailAndPassword","signInWithPopup","GoogleAuthProvider","updateProfile","signOut","createUserWithEmailAndPassword","onAuthStateChanged","useEffect","useState","useFirebase","newUser","setNewUser","isLoadind","setIsLoading","user","setUser","error","setError","auth","googleProvider","googleSignIn","then","result","finally","catch","err","message","registerUser","email","password","setUserDisplayName","login","unsubscribed","currentUser","displayName","name","photoURL","logout"],"mappings":"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","sourcesContent":["import firebaseInIt from \"../../Firebase/firebase.init.js\";\r\nimport { getAuth,signInWithEmailAndPassword,signInWithPopup,GoogleAuthProvider,updateProfile,signOut,createUserWithEmailAndPassword,onAuthStateChanged} from \"firebase/auth\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfirebaseInIt();\r\nconst useFirebase = () => {\r\n    const [newUser, setNewUser] = useState({});\r\n    const [isLoadind, setIsLoading] = useState(true);\r\n    const [user, setUser] = useState({});\r\n    const[error,setError]=useState('')\r\n    const auth = getAuth();\r\n    const googleProvider = new GoogleAuthProvider();\r\n\r\n    function googleSignIn() {\r\n        setIsLoading(true)\r\n        signInWithPopup(auth, googleProvider)\r\n            .then(result => {\r\n                const user = result.user;\r\n                setUser(user);\r\n            })\r\n            .finally(()=>setIsLoading(false))\r\n        .catch(err=>setError(err.message))\r\n    }\r\n\r\n    //email-pass\r\n    function registerUser() {\r\n        createUserWithEmailAndPassword(auth, newUser.email, newUser.password)\r\n            .then(result => {\r\n                setUserDisplayName();\r\n                setNewUser({})\r\n            })\r\n        .catch(error=>setError(error.message))\r\n    }\r\n\r\n//login\r\n    function login() {\r\n        signInWithEmailAndPassword(auth,newUser.email,newUser.password)\r\n            .then(result => {\r\n                const user = result.user;\r\n                setUser(user)\r\n                setNewUser({});\r\n            })\r\n            .catch(error => setError(error.message))\r\n    }\r\n\r\n    //get sign in user\r\n    useEffect(() => {\r\n        const unsubscribed = onAuthStateChanged(auth, (user) => {\r\n            if (user) {\r\n                setUser(user)\r\n            }\r\n            else {\r\n                setUser({})\r\n            }\r\n            setNewUser({});\r\n            setIsLoading(false)\r\n        });\r\n        return () => unsubscribed;\r\n    },[])\r\n    //set user name and photo url\r\n    function setUserDisplayName() {\r\n        updateProfile(auth.currentUser, {\r\n            displayName: newUser.name,\r\n            photoURL:newUser.photoURL\r\n        })\r\n            .then(() => { })\r\n            .catch(error => {\r\n            setError(error.message)\r\n        })\r\n    }\r\n    //logout\r\n    function logout() {\r\n        setIsLoading(true)\r\n        signOut(auth)\r\n            .then(() => {\r\n                setNewUser({});\r\n                setUser({});\r\n            })\r\n            .finally(()=>setIsLoading(false))\r\n        .catch(err=>setError(err.message))\r\n    }\r\n\r\n    return {\r\n        googleSignIn,\r\n        isLoadind,\r\n        user, error,\r\n        logout,\r\n        newUser, setNewUser,\r\n        registerUser,\r\n        login\r\n}\r\n};\r\n\r\nexport default useFirebase;"]},"metadata":{},"sourceType":"module"}