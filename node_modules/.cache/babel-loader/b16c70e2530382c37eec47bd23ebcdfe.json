{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport firebaseInIt from \"../../Firebase/firebase.init.js\";\nimport { getAuth, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, updateProfile, signOut, createUserWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\nimport { useEffect, useState } from \"react\";\nfirebaseInIt();\n\nconst useFirebase = () => {\n  _s();\n\n  const [newUser, setNewUser] = useState({});\n  const [isLoadind, setIsLoading] = useState(true);\n  const [user, setUser] = useState({});\n  const [error, setError] = useState('');\n  const auth = getAuth();\n  const googleProvider = new GoogleAuthProvider();\n\n  function googleSignIn() {\n    setIsLoading(true);\n    signInWithPopup(auth, googleProvider).then(result => {\n      const user = result.user;\n      setUser(user);\n    }).catch(err => setError(err.message));\n  } //email-pass\n\n\n  function registerUser() {\n    createUserWithEmailAndPassword(auth, newUser.email, newUser.password).then(result => {\n      setUserDisplayName();\n      setNewUser({});\n    }).catch(error => setError(error.message));\n  } //login\n\n\n  function login() {\n    signInWithEmailAndPassword(auth, newUser.email, newUser.password).then(result => {\n      const user = result.user;\n      setUser(user);\n      setNewUser({});\n    }).catch(error => setError(error.message));\n  } //get sign in user\n\n\n  useEffect(() => {\n    const unsubscribed = onAuthStateChanged(auth, user => {\n      if (user) {\n        setUser(user);\n      } else {\n        setUser({});\n      }\n\n      setNewUser({});\n      setIsLoading;\n    });\n    return () => unsubscribed;\n  }, []); //set user name and photo url\n\n  function setUserDisplayName() {\n    updateProfile(auth.currentUser, {\n      displayName: newUser.name,\n      photoURL: newUser.photoURL\n    }).then(() => {}).catch(error => {\n      setError(error.message);\n    });\n  } //logout\n\n\n  function logout() {\n    signOut(auth).then(() => {\n      setNewUser({});\n      setUser({});\n    }).finally(() => setIsLoading(false)).catch(err => setError(err.message));\n  }\n\n  return {\n    googleSignIn,\n    user,\n    error,\n    logout,\n    newUser,\n    setNewUser,\n    registerUser,\n    login\n  };\n};\n\n_s(useFirebase, \"wwjfiXoL41/j057bj4sZUYLVD2U=\");\n\nexport default useFirebase;","map":{"version":3,"sources":["C:/project/garaz-client/src/Components/hooks/useFirebase.js"],"names":["firebaseInIt","getAuth","signInWithEmailAndPassword","signInWithPopup","GoogleAuthProvider","updateProfile","signOut","createUserWithEmailAndPassword","onAuthStateChanged","useEffect","useState","useFirebase","newUser","setNewUser","isLoadind","setIsLoading","user","setUser","error","setError","auth","googleProvider","googleSignIn","then","result","catch","err","message","registerUser","email","password","setUserDisplayName","login","unsubscribed","currentUser","displayName","name","photoURL","logout","finally"],"mappings":"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","sourcesContent":["import firebaseInIt from \"../../Firebase/firebase.init.js\";\r\nimport { getAuth,signInWithEmailAndPassword,signInWithPopup,GoogleAuthProvider,updateProfile,signOut,createUserWithEmailAndPassword,onAuthStateChanged} from \"firebase/auth\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfirebaseInIt();\r\nconst useFirebase = () => {\r\n    const [newUser, setNewUser] = useState({});\r\n    const [isLoadind, setIsLoading] = useState(true);\r\n    const [user, setUser] = useState({});\r\n    const[error,setError]=useState('')\r\n    const auth = getAuth();\r\n    const googleProvider = new GoogleAuthProvider();\r\n\r\n    function googleSignIn() {\r\n        setIsLoading(true)\r\n        signInWithPopup(auth, googleProvider)\r\n            .then(result => {\r\n                const user = result.user;\r\n                setUser(user);\r\n            })\r\n        .catch(err=>setError(err.message))\r\n    }\r\n\r\n    //email-pass\r\n    function registerUser() {\r\n        createUserWithEmailAndPassword(auth, newUser.email, newUser.password)\r\n            .then(result => {\r\n                setUserDisplayName();\r\n                setNewUser({})\r\n            })\r\n        .catch(error=>setError(error.message))\r\n    }\r\n\r\n//login\r\n    function login() {\r\n        signInWithEmailAndPassword(auth,newUser.email,newUser.password)\r\n            .then(result => {\r\n                const user = result.user;\r\n                setUser(user)\r\n                setNewUser({});\r\n            })\r\n            .catch(error => setError(error.message))\r\n    }\r\n\r\n    //get sign in user\r\n    useEffect(() => {\r\n        const unsubscribed = onAuthStateChanged(auth, (user) => {\r\n            if (user) {\r\n                setUser(user)\r\n            }\r\n            else {\r\n                setUser({})\r\n            }\r\n            setNewUser({});\r\n            setIsLoading\r\n        });\r\n        return () => unsubscribed;\r\n    },[])\r\n    //set user name and photo url\r\n    function setUserDisplayName() {\r\n        updateProfile(auth.currentUser, {\r\n            displayName: newUser.name,\r\n            photoURL:newUser.photoURL\r\n        })\r\n            .then(() => { })\r\n            .catch(error => {\r\n            setError(error.message)\r\n        })\r\n    }\r\n    //logout\r\n    function logout() {\r\n        signOut(auth)\r\n            .then(() => {\r\n                setNewUser({});\r\n                setUser({});\r\n            })\r\n            .finally(()=>setIsLoading(false))\r\n        .catch(err=>setError(err.message))\r\n    }\r\n\r\n    return {\r\n        googleSignIn,\r\n        user, error,\r\n        logout,\r\n        newUser, setNewUser,\r\n        registerUser,\r\n        login\r\n}\r\n};\r\n\r\nexport default useFirebase;"]},"metadata":{},"sourceType":"module"}